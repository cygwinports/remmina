inherit cmake

NAME="remmina"
VERSION=1.0.0
RELEASE=2
CATEGORY="Net"
SUMMARY="GTK+ remote desktop client (SSH/SFTP protocols)"
DESCRIPTION="Remmina is a remote desktop client written in GTK+, aiming to be
useful for system administrators and travellers, who need to work with lots of
remote computers in front of either large monitors or tiny netbooks. Remmina
supports multiple network protocols in an integrated and consistant user
interface. Currently RDP, VNC, NX, XDMCP and SSH are supported."
HOMEPAGE="http://remmina.sourceforge.net/"
SRC_URI="https://github.com/FreeRDP/Remmina/archive/${VERSION}/Remmina-${VERSION}.tar.gz"
SRC_DIR="Remmina-${VERSION}"
PATCH_URI="
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-library-name.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-linker-error.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-add-clipboard-support.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-clipboard-bugfix.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-some-more-clipboard-fixes.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-disconnect-signal-handler-after-disconnect.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-crashes-in-some-cases.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-memory-leak.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-typo-when-fitting-window.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-trayicon-patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-scrolling-in-vnc-plugin.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-Also-handle-GDK_SCROLL_SMOOTH.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-close-SSH-tunnel-on-disconnect.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-fullscreen-with-multiple-monitors.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-dsofix.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-desktop-file.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-fix-install-paths.patch?h=f20
	http://pkgs.fedoraproject.org/cgit/remmina.git/plain/remmina-1.0.0-remove-inline-libvncserver.patch?h=f20
	1.0.0-freerdp-libs.patch
	1.0.0-cygwin-fPIC.patch
	1.0.0-no-undefined.patch
	1.0.0-cmake-install.patch
"

CFLAGS+=" -DLIBVNCSERVER_WITH_CLIENT_TLS=1"
# TELEPATHY: fails to compile
CYGCMAKE_ARGS="
	-DLIBVNCSERVER_WITH_CLIENT_TLS=1
	-DWITH_APPINDICATOR=OFF
	-DWITH_AVAHI=ON
	-DWITH_FREERDP=ON
	-DWITH_GCRYPT=ON
	-DWITH_GETTEXT=ON
	-DWITH_LIBSSH=ON
	-DWITH_PTHREAD=ON
	-DWITH_TELEPATHY=OFF
	-DWITH_VTE=ON
	-DWITH_ZLIB=ON
"

PKG_NAMES="${NAME} ${NAME}-devel"
remmina_OBSOLETES="remmina-plugins"
remmina_CONTENTS="etc/ usr/bin/remmina.exe usr/lib/remmina/plugins/*.dll usr/share/"
remmina_devel_CONTENTS="usr/include/remmina/ usr/lib/lib* usr/lib/pkgconfig/"
PKG_IGNORE="usr/lib/remmina/plugins/*.a"
